<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Survey</title>

	<!-- Bootstrap CSS-->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

	<!-- jQuery -->
	<script
	  src="https://code.jquery.com/jquery-3.2.1.min.js"
	  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
	  crossorigin="anonymous"></script>

	<!-- Bootstrap JavaScript Plug-ins -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	
	<!-- bootstrap-select -->
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css">
	<!-- Latest compiled and minified JavaScript -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script>
</head>
<body>

	<div class="container">

		<div class="row">
			<div class="col-lg-12">
				<h1>Survey Questions</h1>
			</div>
		</div>
		<div class="row">
			<div class="col-lg-12">
				<h2>About You</h2>
			</div>
		</div>
		<div class="row">
			<div class="col-lg-12">
				<form>
					<div class="form-group">
				    	<label for="nameInput">Name (Required)</label>
				    	<input type="text" class="form-control" id="nameInput" placeholder="Your name">
					</div>
					<div class="form-group">
				    	<label for="imageInput">Link to Photo Image (Required)</label>
				    	<input type="text" class="form-control" id="imageInput" placeholder="Image URL">
					</div>
				</form>
			</div>
		</div>
		<div class="row">
			<div class="col-lg-12">
				<form>
					<div class="form-group">
						<h3>Question 1</h3>
						<h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
						<select class="selectpicker" title='Select an Option' id="question-1">
							<option>1 (Strongly Disagree)</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>5 (Strongly Agree)</option>
						</select>
					</div>
					<div class="form-group">
						<h3>Question 2</h3>
						<h4>Generally speaking, you rely more on your experience than your imagination.</h4>
						<select class="selectpicker" title='Select an Option' id="question-2">
							<option>1 (Strongly Disagree)</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>5 (Strongly Agree)</option>
						</select>
					</div>
					<div class="form-group">
						<h3>Question 3</h3>
						<h4>You find it easy to stay relaxed and focused even when there is some pressure.</h4>
						<select class="selectpicker" title='Select an Option' id="question-3">
							<option>1 (Strongly Disagree)</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>5 (Strongly Agree)</option>
						</select>
					</div>
					<div class="form-group">
						<h3>Question 4</h3>
						<h4>You rarely do something just out of sheer curiousity.</h4>
						<select class="selectpicker" title='Select an Option' id="question-4">
							<option>1 (Strongly Disagree)</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>5 (Strongly Agree)</option>
						</select>
					</div>
					<div class="form-group">
						<h3>Question 5</h3>
						<h4>People can rarely upset you.</h4>
						<select class="selectpicker" title='Select an Option' id="question-5">
							<option>1 (Strongly Disagree)</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>5 (Strongly Agree)</option>
						</select>
					</div>
					<div class="form-group">
						<h3>Question 6</h3>
						<h4>It is often difficult for you to relate to other people's feelings.</h4>
						<select class="selectpicker" title='Select an Option' id="question-6">
							<option>1 (Strongly Disagree)</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>5 (Strongly Agree)</option>
						</select>
					</div>
					<div class="form-group">
						<h3>Question 7</h3>
						<h4>In a discussion, truth should be more important than people's sensitivities.</h4>
						<select class="selectpicker" title='Select an Option' id="question-7">
							<option>1 (Strongly Disagree)</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>5 (Strongly Agree)</option>
						</select>
					</div>
					<div class="form-group">
						<h3>Question 8</h3>
						<h4>You rarely get carried away by fantasies and ideas.</h4>
						<select class="selectpicker" title='Select an Option' id="question-8">
							<option>1 (Strongly Disagree)</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>5 (Strongly Agree)</option>
						</select>
					</div>
					<div class="form-group">
						<h3>Question 9</h3>
						<h4>You think that everyone's views should be respected regardless of whether they are supported by facts or not.</h4>
						<select class="selectpicker" title='Select an Option' id="question-9">
							<option>1 (Strongly Disagree)</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>5 (Strongly Agree)</option>
						</select>
					</div>
					<div class="form-group">
						<h3>Question 10</h3>
						<h4>You feel more energetic after spending time with a group of people.</h4>
						<select class="selectpicker" title='Select an Option' id="question-10">
							<option>1 (Strongly Disagree)</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>5 (Strongly Agree)</option>
						</select>
					</div>
					<button type="submit" class="btn btn-primary form-control submit">Submit</button>
				</form>
			</div>
		</div>

		<footer class="footer">
			<div class="container">
				<p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/kstarre/friend-finder">Github Repo</a></p>
			</div>
		</footer>
	</div>

	<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Your Best Match" id="matchModal">
	  <div class="modal-dialog" role="document">
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close modal-close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	        <h4 class="modal-title">Your Best Match</h4>
	      </div>
	      <div class="modal-body">
	        <p id="matchName"></p>
	        <p><img id="matchPhoto"/></p>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default modal-close" data-dismiss="modal">Close</button>
	      </div>
	    </div><!-- /.modal-content -->
	  </div><!-- /.modal-dialog -->
	</div><!-- /.modal -->

	<script type="text/javascript">
		$(".submit").on('click', function(event) {
			event.preventDefault();
			var choices = [];
			// validate name and image entry
			if ( $("#nameInput").val() === '' || $("#imageInput").val() === '') {
				alert("You must fill in all fields.");
				return;
			};

			for (var i = 1; i < 11; i++) {
				var choice = $("#question-" + i).val();
				if (choice === '') {
					alert("You must fill in all fields.");
					return;
				};
				choices.push( parseInt(choice) );
			};

			var newFriend = {
				name: $('#nameInput').val().trim(),
				photo: $('#imageInput').val().trim(),
				scores: choices
			};

			$.post('/api/friends', newFriend, data => {
				$("#matchName").text(data.name);
				$("#matchPhoto").attr('src', data.photo);
				$("#matchModal").modal('toggle');
				
				$("#nameInput").val("");
				$("#imageInput").val("");
				// how can i re-set the select options?

			});
		});

	</script>
</body>
</html>